<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="StoryApp">
  <head>
    <meta charset="utf-8">
    <title>yourStory</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>
    <script src="js/app.js"></script>
      <link rel="stylesheet" href="/materialize/css/materialize.css">
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body ng-controller="PostController as ctrl">
  <div class="story-container">
    <h1 class="fade-in">{{ctrl.title}}</h1>

    <button ng-click="ctrl.toggleCreate = $index" ng-if="$index !== ctrl.toggleCreate" >New Story</button>

    <div class="create-form">
      <form ng-submit="ctrl.createPost()" ng-if="$index === ctrl.toggleCreate">
        <input type="text" placeholder="name" ng-model="ctrl.name">
        <input type="text" placeholder="image" ng-model="ctrl.image">
        <input type="text" placeholder="audio" ng-model="ctrl.audio">
        <input type="text" placeholder="time period" ng-model="ctrl.timePeriod">
        <input type="submit" value="Post">
        <button ng-click="ctrl.toggleCreate = !$index">Cancel</button>
      </form>
    </div>

    <ul ng-repeat="story in ctrl.post">
      <li>

        <img class="scale-up-center" id="story-img" src={{story.image}} alt="">

        <p>Listen to <em>{{story.name}}'s</em> story</p>

        <div class="audio-file"
        ng-include="'audio.html'">

        </div>

        <button ng-click="ctrl.deletePost(story)" type="button" name="button">delete</button>

        <button
          ng-if="$index !== ctrl.toggleEdit"
          ng-click="ctrl.toggleEdit = $index"
          type="button"
          name="button">edit</button>

        <form ng-submit="ctrl.editPost(story)">
        <div ng-if="$index === ctrl.toggleEdit">
          <input type="text" ng-model="ctrl.updateName" placeholder="{{story.name}}">
          <input type="text" ng-model="ctrl.updateImage" placeholder="{{story.image}}">
          <input type="text" ng-model="ctrl.updateAudio" placeholder="{{story.audio}}">
          <input type="submit" value="update">
          <button
          ng-click="ctrl.toggleEdit = !$index"
          type="button" name="button">Cancel</button>
        </div>
        </form>

      </li>

    </ul>
  </div>
  </body>
</html>
